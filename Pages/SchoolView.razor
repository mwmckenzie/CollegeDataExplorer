@page "/schoolview"

@using CollegeDataExplorer.Services
@using CollegeDataExplorer.Models
@implements IDisposable

@inject DataStateService dataStateService

<SchoolDetails school="@_school"/>


@code {
    
    private SchoolDisplay _school = new();
    
    protected override Task OnInitializedAsync() {
        dataStateService.OnValueChange += DataStateHasChanged;


        if (string.IsNullOrWhiteSpace(dataStateService.selectedState)) {
            return Task.CompletedTask;
        }
        DataStateHasChanged();
        return Task.CompletedTask;
    }

    private void DataStateHasChanged() {
        _school = dataStateService.selectedSchool;
    }

    public void Dispose() {
        dataStateService.OnValueChange -= DataStateHasChanged;
    }
    
@*     <MudPaper Class="pa-4"> *@
@*     <MudPaper Class="pa-4 mb-4"> *@
@*         <MudText Typo="Typo.h3">@_school.name</MudText> *@
@*         <MudStack Row="true" Justify="Justify.SpaceBetween"> *@
@*             <MudText Typo="Typo.body1">@_school.stateFips</MudText> *@
@*             <MudStack Row="true" Spacing="3"> *@
@*                 <MudIcon Icon="@Icons.Material.Filled.Link"></MudIcon> *@
@*                 <MudLink Href="@_school.schoolUrl" Target="_blank" Typo="Typo.body1">@_school.schoolUrl</MudLink> *@
@*             </MudStack> *@
@*         </MudStack> *@
@*     </MudPaper> *@
@* *@
@*     <MudStack Row="true" Spacing="3"> *@
@*         <MudIcon Icon="@Icons.Filled.LocationOn"></MudIcon> *@
@*         <MudText class="mr-4" Typo="Typo.h6">@_school.city</MudText> *@
@*         <MudText Typo="Typo.h6">@_school.state</MudText> *@
@*         <MudText class="ml-4" Typo="Typo.h6">@_school.zip</MudText> *@
@*     </MudStack> *@
@*      *@
@*     <MudStack Row="true" Spacing="3"> *@
@*         <MudIcon Icon="@Icons.Filled.Map"></MudIcon> *@
@*         <MudText Class="mr-4" Typo="Typo.h6">@_school.regionId</MudText> *@
@*         <MudText Typo="Typo.h6">@_school.locale</MudText> *@
@*     </MudStack> *@
@* *@
@*     <MudStack Row="true" Spacing="3"> *@
@*         <MudIcon Icon="@Icons.Filled.School"></MudIcon> *@
@*         <MudText Class="mr-4" Typo="Typo.h6">@_school.mainCampus</MudText> *@
@*         <MudText Typo="Typo.h6">@_school.genderRestriction</MudText> *@
@*     </MudStack> *@
@*      *@
@*     <MudPaper Class="mt-2 mb-2 pa-2"> *@
@*         <MudText Typo="Typo.subtitle2">Carnegie Basic</MudText> *@
@*         <MudText Typo="Typo.h6">@_school.carnegieBasic</MudText> *@
@* *@
@*         <MudText Typo="Typo.subtitle2" Class="mt-4">Carnegie Undergrad</MudText> *@
@*         <MudText Typo="Typo.h6">@_school.carnegieUndergrad</MudText> *@
@* *@
@*         <MudText Typo="Typo.subtitle2" Class="mt-4">Carnegie Size & Setting</MudText> *@
@*         <MudText Typo="Typo.h6">@_school.carnegieSizeSetting</MudText> *@
@* *@
@*         <MudText Typo="Typo.subtitle2" Class="mt-4">Type</MudText> *@
@*         <MudText Typo="Typo.h6">@_school.ownership</MudText> *@
@*         <MudText Typo="Typo.h6">Online Only: @_school.onlineOnly</MudText> *@
@* *@
@*         @if (_school.aliasListToString != string.Empty) { *@
@*             <MudText Typo="Typo.subtitle2" Class="mt-4">Nicknames</MudText> *@
@*             <MudText Typo="Typo.body1">@_school.aliasListToString</MudText> *@
@*         } *@
@* *@
@*         @if (_school.priceCalculatorUrl != string.Empty) { *@
@*             <MudText Typo="Typo.subtitle2" Class="mt-4">Price Calculator</MudText> *@
@*             <MudStack Row="true" Spacing="3"> *@
@*                 <MudIcon Icon="@Icons.Material.Filled.Link"></MudIcon> *@
@*                 <MudLink Href="@_school.schoolUrl" Target="_blank" Typo="Typo.body1">@_school.priceCalculatorUrl</MudLink> *@
@*             </MudStack> *@
@*         } *@
@*     </MudPaper> *@
@* </MudPaper> *@

}